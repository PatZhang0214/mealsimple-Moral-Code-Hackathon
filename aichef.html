<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Generator</title>
</head>
<body>
    <h1>Recipe Generator</h1>
    <form id="recipeForm">
        <label for="cuisine">Cuisine:</label>
        <input type="text" id="cuisine" name="cuisine" value="chinese"><br><br>

        <label for="restrictions">Dietary Restrictions:</label>
        <input type="text" id="restrictions" name="restrictions" value="vegetarian"><br><br>

        <label for="time">Time To Make:</label>
        <input type="text" id="time" name="time" value="30 minutes"><br><br>

        <label for="cost">Budget:</label>
        <input type="text" id="cost" name="cost" value="$10"><br><br>

        <button type="button" onclick="generateRecipe()">Generate Recipe</button>
    </form>

    <div id="recipeResult"></div>

    <script>
        async function generateRecipe() {
            const apiKey = 'sk-proj-FuaeF67W8CUavlAtyu85T3BlbkFJ2F64lhPlWTAQCAYEFDst'; // Replace this with your actual OpenAI API key
            const modelEndpoint = 'https://api.openai.com/v1/chat/completions';

            const formData = {
                model: "gpt-4",
                messages: [{
                    "role": "user",
                    "content": `Generate a name, ingredients list, and a step-by-step recipe for a meal based on these specifications: Cuisine: ${document.getElementById('cuisine').value}, Dietary Restrictions: ${document.getElementById('restrictions').value}, Time To Make: ${document.getElementById('time').value}, Budget: ${document.getElementById('cost').value} (make the response easy to read and less than 100 words)`
                }],
                max_tokens: 200
            };

            try {
                const response = await fetch(modelEndpoint, {
                    method: 'POST',
                    headers: {
                        'Authorization': 'Bearer ' + apiKey,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });

                if (!response.ok) {
                    throw new Error('Failed to fetch recipe: ' + response.statusText);
                }

                const result = await response.json();
                document.getElementById('recipeResult').innerText = result.choices[0].message.content;
            } catch (error) {
                document.getElementById('recipeResult').innerText = 'Failed to generate recipe: ' + error.message;
            }
        }
    </script>
</body>
</html>